{"version":3,"sources":["../app-es6/main.js"],"names":["call","Call","dddOrigin","document","querySelector","dddDestination","time","contactName","email","message","faleMaisPrice","defaultPrice","withFaleMais","withoutFaleMais","planSelect","snackbar","params","calls","plans","window","onload","getRequest","mountDDDOptions","mountPlansOptions","onsubmit","setLigacaoAttributes","sendContact","onchange","manageDestination","Number","value","plan","pricePerMinute","getPrice","tax","getTax","mountBenchmark","goTo","id","scroll","offsetTop","post","messages","date","Date","content","postRequest","snackbarAnimation","route","fn","req","XMLHttpRequest","onreadystatechange","readyState","status","open","setRequestHeader","send","JSON","stringify","classList","add","setTimeout","remove","context","parse","responseText","origin","destination","originCall","filter","destCall","dddDestinations","dest","ddd","planValue","planData","forEach","Option","String","text","textContent","toLocaleString","minimumFractionDigits","event","removeDestinations","addDestination","target","options","querySelectorAll","ele","selectedIndex","arrDestinations"],"mappings":"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","file":"main.js","sourcesContent":["const call = new Call();\nconst dddOrigin = document.querySelector('#ddd_origin');\nconst dddDestination = document.querySelector('#ddd_destination');\nconst time = document.querySelector('#time');\nconst contactName = document.querySelector('#contact_name');\nconst email = document.querySelector('#email');\nconst message = document.querySelector('#message');\nconst faleMaisPrice = document.querySelector('#with_falemais_price');\nconst defaultPrice = document.querySelector('#without_falemais_price');\nconst withFaleMais = document.querySelector('.with.falemais');\nconst withoutFaleMais = document.querySelector('.without.falemais');\nconst planSelect = document.querySelector('#plan');\nconst snackbar = document.querySelector('.snackbar');\nconst params = {\n    calls: null,\n    plans: null\n};\n\nwindow.onload = function() {\n    getRequest('api/calls', 'calls', mountDDDOptions);\n    getRequest('api/plans', 'plans', mountPlansOptions);\n    document.querySelector('#simulation-form').onsubmit = setLigacaoAttributes;\n    document.querySelector('#contact-form').onsubmit = sendContact;\n    document.querySelector('#ddd_origin').onchange = manageDestination;\n}\n\nfunction setLigacaoAttributes() {\n    call.dddOrigin = Number(dddOrigin.value);\n    call.dddDestination = Number(dddDestination.value);\n    call.time = Number(time.value);\n    call.plan = Number(planSelect.value);\n    call.pricePerMinute = getPrice();\n    call.tax = getTax();\n    mountBenchmark();\n\n    return false;\n}\n\nfunction goTo(id) {\n    window.scroll(0, document.querySelector(`#${id}`).offsetTop - 100);\n}\n\nfunction sendContact() {\n    const post = {\n        contactName: contactName.value,\n        email: email.value,\n        messages: [\n            {\n                date: new Date(),\n                content: message.value\n            }\n        ]\n    }\n    postRequest('api/calls', post, snackbarAnimation)\n    return false\n}\n\nfunction postRequest(route, params, fn) {\n    const req = new XMLHttpRequest();\n    req.onreadystatechange = function() {\n        if(this.readyState == 4 && this.status == 200) {\n            fn()\n        }\n    }\n    req.open(\"POST\", 'api/contact', true)\n    req.setRequestHeader(\"Content-type\", \"application/json\");\n    req.send(JSON.stringify(params));\n\n    return false;\n}\n\nfunction snackbarAnimation() {\n    snackbar.classList.add('show')\n    setTimeout(() => {\n        return snackbar.classList.remove('show')\n    }, 3000);\n}\n\nfunction getRequest(route, context, fn) {\n    const req = new XMLHttpRequest();\n    req.onreadystatechange = function() {\n        if(this.readyState == 4 && this.status == 200) {\n            params[context] = JSON.parse(req.responseText)\n            fn()\n        }\n    }\n    req.open(\"GET\", route, true)\n    req.send()\n}\n\nfunction getPrice() {\n    const origin = dddOrigin.value;\n    const destination = dddDestination.value;\n    const originCall = params.calls.filter(call => {\n        return call.dddOrigin == origin;\n    })\n    const destCall = originCall[0].dddDestinations.filter((dest) => {\n        return dest.ddd == destination;\n    })\n    return destCall[0].pricePerMinute;\n}\n\nfunction getTax() {\n    const planValue = plan.value\n    const planData = params.plans.filter(plan => {\n        return plan.value == planValue\n    })\n    return planData[0].tax\n}\n\nfunction mountDDDOptions() {\n    params.calls.forEach(call => {\n        dddOrigin.add(new Option(0 + String(call.dddOrigin), call.dddOrigin, false))\n        dddDestination.add(new Option(0 + String(call.dddOrigin), call.dddOrigin, false))\n    })\n}\n\nfunction mountPlansOptions() {\n    params.plans.forEach(function(plan) {\n        planSelect.add(new Option(plan.text, plan.value, false))\n    })\n}\n\nfunction mountBenchmark() {\n    faleMaisPrice.textContent = call.faleMaisPrice.toLocaleString('pt-BR', {minimumFractionDigits: 2});\n    defaultPrice.textContent = call.defaultPrice.toLocaleString('pt-BR', {minimumFractionDigits: 2});\n    withFaleMais.classList.remove('better', 'worst')\n    withoutFaleMais.classList.remove('better', 'worst')\n\n    if(call.faleMaisPrice <= call.defaultPrice) {\n        withFaleMais.classList.add('better')\n        withoutFaleMais.classList.add('worst')\n    } else {\n        withFaleMais.classList.add('worst')\n        withoutFaleMais.classList.add('better')\n    }\n}\n\nfunction manageDestination(event) {\n    removeDestinations();\n    addDestination(event.target.value);\n}\n\nfunction removeDestinations() {\n    const options = document.querySelectorAll('#ddd_destination option:not(:first-child)');\n    options.forEach(ele => {\n        ele.remove();\n    })\n    dddDestination.selectedIndex = null;\n}\n\nfunction addDestination(origin) {\n    const call = params.calls.filter(call => {\n        return call.dddOrigin == origin;\n    })\n    const arrDestinations = call[0].dddDestinations\n    arrDestinations.forEach(dest => {\n        dddDestination.add(new Option(0 + String(dest.ddd), dest.ddd, false))\n    });\n}\n"]}